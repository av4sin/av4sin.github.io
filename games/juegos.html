<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página Principal</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        @media (max-width: 600px) {
            .container {
                padding: 10px;
                margin: 20px auto;
            }
            button {
                padding: 8px;
                font-size: 0.9em;
            }
            .score {
                font-size: 1em;
            }
            .score-container {
                padding: 10px;
            }
        }
        .rank-display {
            text-align: center;
            margin-top: 20px;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .game-card {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.5);
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .game-card:hover {
            transform: scale(1.05);
            box-shadow: 0px 6px 15px rgba(0, 0, 0, 0.7);
        }

        .game-card img {
            max-width: 100px;
            margin-bottom: 10px;
        }

        .game-card h3 {
            color: #FFD700; /* Gold */
            font-family: 'Oswald', sans-serif;
        }

        .game-card a {
            text-decoration: none;
            color: white;
            font-weight: bold;
        }

        .recent-games {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.5);
        }

        .recent-games h2 {
            color: #FFD700; /* Gold */
            font-family: 'Oswald', sans-serif;
        }

        .recent-game-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.5);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .recent-game-card:hover {
            transform: scale(1.05);
            box-shadow: 0px 6px 15px rgba(0, 0, 0, 0.7);
        }

        .recent-game-card img {
            max-width: 80px;
            margin-right: 15px;
        }

        .recent-game-card h3 {
            color: #FFD700; /* Gold */
            font-family: 'Oswald', sans-serif;
            margin: 0;
        }

        .recent-game-card a {
            text-decoration: none;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Bienvenido a los Juegos Militares</h1>
        <div class="recent-games">
            <h2>Últimos Juegos Accedidos</h2>
            <div id="recentGamesContainer"></div>
        </div>
        <div class="score-container">
            <h2>Información de Puntuación</h2>
            <div class="score-details">
                <div class="score-item">
                    <img src="img/high_score_icon.png" alt="High Score Icon" class="score-icon">
                    <span id="highScore" class="score">0</span>
                </div>
                <div class="score-item">
                    <img src="img/next_rank_icon.png" alt="Next Rank Icon" class="score-icon">
                    <span id="pointsToNextRank">50</span>
                </div>
            </div>
            <div id="rankDisplay" class="rank-display">
                <img id="rankImage" src="img/soldado.png" alt="Insignia del rango">
                <span id="rankName">Soldado</span>
            </div>
        </div>
        <p>Selecciona un juego para comenzar tu entrenamiento militar.</p>
        <div class="game-grid">
            <div class="game-card">
                <img src="img/military-ranks-icon.png" alt="Rangos Militares">
                <h3>Rangos Militares</h3>
                <a href="/military_ranks.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/mission-icon.png" alt="Simulador de Misión">
                <h3>Simulador de Misión</h3>
                <a href="/games/simulador-mision.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/trivia-icon.png" alt="Trivia Militar">
                <h3>Trivia Militar</h3>
                <a href="/games/trivia-militar.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/strategy-icon.png" alt="Simulador de Estrategia">
                <h3>Simulador de Estrategia</h3>
                <a href="/games/simulador-estrategia.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/equipment-icon.png" alt="Identificación de Equipos">
                <h3>Identificación de Equipos</h3>
                <a href="/games/identificacion-equipos.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/hierarchy-icon.png" alt="Orden Jerárquico">
                <h3>Orden Jerárquico</h3>
                <a href="/games/orden-jerarquico.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/rank-battle-icon.png" alt="Batalla de Rangos">
                <h3>Batalla de Rangos</h3>
                <a href="/games/batalla-rangos.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/memory-icon.png" alt="Juego de Memoria">
                <h3>Juego de Memoria</h3>
                <a href="/games/juego-memoria.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/insignia-icon.png" alt="Reconocimiento de Insignias">
                <h3>Reconocimiento de Insignias</h3>
                <a href="/games/reconocimiento-insignias.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/basic-training-icon.png" alt="Entrenamiento Básico">
                <h3>Entrenamiento Básico</h3>
                <a href="/games/entrenamiento-basico.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/promotion-icon.png" alt="Simulador de Ascenso">
                <h3>Simulador de Ascenso</h3>
                <a href="/games/simulador-ascenso.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/military-identification-icon.png" alt="Identificación Militar">
                <h3>Identificación Militar</h3>
                <a href="/military_identification.html">Jugar</a>
            </div>
            <div class="game-card">
                <img src="img/military-groups-icon.png" alt="Grupos Militares">
                <h3>Grupos Militares</h3>
                <a href="/military_groups.html">Jugar</a>
            </div>
        </div>
    </div>

    <script src="js/Points.js"></script>
    <script>
        const ranks = [
            { name: "Soldado", img: "img/soldado.png", points: 0 },
            { name: "Cabo", img: "img/cabo.png", points: 30 },
            { name: "Sargento", img: "img/sargento.png", points: 60 },
            { name: "Teniente", img: "img/teniente.png", points: 100 },
            { name: "Capitán", img: "img/capitan.png", points: 150 },
            { name: "Comandante", img: "img/comandante.png", points: 210 },
            { name: "Coronel", img: "img/coronel.png", points: 280 },
            { name: "General", img: "img/general.png", points: 360 }
        ];

        const games = [
            { name: "Trivia Militar", url: "/games/trivia-militar.html", icon: "img/trivia-icon.png" },
            { name: "Simulador de Estrategia", url: "/games/simulador-estrategia.html", icon: "img/strategy-icon.png" },
            { name: "Identificación de Equipos", url: "/games/identificacion-equipos.html", icon: "img/equipment-icon.png" },
            { name: "Orden Jerárquico", url: "/games/orden-jerarquico.html", icon: "img/hierarchy-icon.png" },
            { name: "Batalla de Rangos", url: "/games/batalla-rangos.html", icon: "img/rank-battle-icon.png" },
            { name: "Simulador de Misión", url: "/games/simulador-mision.html", icon: "img/mission-icon.png" },
            { name: "Juego de Memoria", url: "/games/juego-memoria.html", icon: "img/memory-icon.png" },
            { name: "Reconocimiento de Insignias", url: "/games/reconocimiento-insignias.html", icon: "img/insignia-icon.png" },
            { name: "Entrenamiento Básico", url: "/games/entrenamiento-basico.html", icon: "img/basic-training-icon.png" },
            { name: "Simulador de Ascenso", url: "/games/simulador-ascenso.html", icon: "img/promotion-icon.png" }
        ];

        function getNextRankPoints(currentPoints) {
            const nextRank = ranks.find(rank => rank.points > currentPoints);
            return nextRank ? nextRank.points - currentPoints : 0;
        }

        function loadCumulativePoints() {
            const points = new Points();
            const cumulativePoints = points.getCumulativePoints();
            document.getElementById("highScore").textContent = cumulativePoints;

            const currentRank = ranks.slice().reverse().find(r => cumulativePoints >= r.points) || ranks[0];
            document.getElementById("rankName").textContent = currentRank.name;
            document.getElementById("rankImage").src = currentRank.img;
            document.getElementById("rankImage").alt = `Insignia de ${currentRank.name}`;
            document.getElementById("pointsToNextRank").textContent = getNextRankPoints(cumulativePoints);
        }

        function loadRecentGames() {
            const recentGames = JSON.parse(localStorage.getItem("recentGames")) || [];
            const recentGamesContainer = document.getElementById("recentGamesContainer");
            recentGamesContainer.innerHTML = "";

            recentGames.slice(0, 2).forEach(game => {
                const gameData = games.find(g => g.name === game.name);
                if (gameData) {
                    const card = document.createElement("div");
                    card.className = "recent-game-card";
                    card.innerHTML = `
                        <img src="${gameData.icon}" alt="${gameData.name}">
                        <h3>${gameData.name}</h3>
                        <a href="${gameData.url}">Jugar</a>
                    `;
                    recentGamesContainer.appendChild(card);
                }
            });
        }

        function saveRecentGame(gameName) {
            const recentGames = JSON.parse(localStorage.getItem("recentGames")) || [];
            const existingIndex = recentGames.findIndex(game => game.name === gameName);
            if (existingIndex !== -1) {
                recentGames.splice(existingIndex, 1);
            }
            recentGames.unshift({ name: gameName });
            localStorage.setItem("recentGames", JSON.stringify(recentGames));
        }

        document.addEventListener("DOMContentLoaded", () => {
            loadCumulativePoints();
            loadRecentGames();
        });
    </script>
    <script src="./regist_serviceWorker.js"></script>
</body>
</html>
